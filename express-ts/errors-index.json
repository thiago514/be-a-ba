[{"/home/thiago514/Documentos/QQtech/be-a-ba/express-ts/index.ts":"1"},{"size":2294,"mtime":1699376396112,"results":"2","hashOfConfig":"3"},{"filePath":"4","messages":"5","suppressedMessages":"6","errorCount":63,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":55,"fixableWarningCount":2,"source":"7"},"qxn7tu","/home/thiago514/Documentos/QQtech/be-a-ba/express-ts/index.ts",["8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72"],[],"import * as express from 'express'\nimport * as cors from 'cors'\nimport conn from './src/configs/db'\nimport { User } from './src/entities/User'\nimport { IsNull, Not } from 'typeorm'\nimport userRouter from './src/routers/UserRouter'\nimport { hash } from 'bcrypt'\nimport templateRouter from './src/routers/TemplateRouter'\nimport { idUsuario } from './src/resource/auth'\nimport { Log } from './src/entities/Log'\n\nconst app = express();\napp.use((req, res, next) => {\n  const logRepository = conn.getRepository(Log)\n  const log = new Log()\n  log.url = req.url\n  log.userAgent = req.headers[\"user-agent\"]\n  log.origin = req.headers.origin;\n  log.method = req.method;\n  log.body = JSON.stringify(req.body);\n  if (req.headers.token != null && req.headers.token != \"\") {\n    console.log(\"tem token\");\n    const userId = idUsuario(String(req.headers.token));\n    log.user = userId;\n  }\n  if (log.method != \"OPTIONS\") {\n    logRepository.save(log);\n  }\n  console.log(log);\n  next();\n});\n\n\napp.use(express.json());\napp.use(express.urlencoded({ extended: true }));\napp.use(cors());\n\nconsole.log(\"iniciando o database\");\nconn.initialize().then(() => {\n  console.log(\"Database connected...------\\n\\n\\n\\n\\n\\n \");\n  conn\n    .synchronize()\n    .then(() => {\n      console.log(\"Database synchronized... \");\n      app.listen(3000)\n    })\n    .catch((err) => console.log(\"Error: \" + err));\n});\n\n//Routes\napp.use(\"/user\", userRouter);\napp.use(\"/template\", templateRouter);\n\napp.get(\"/\", async (req, res) => {\n  const senha = await hash(\"1234\", 8);\n  await conn.getRepository(User).save({\n    nome: \"basic\",\n    email: \"basic@basic\",\n    senha: senha,\n    matricula: \"4321\",\n    tipo: \"basic\",\n  });\n\n  conn\n    .getRepository(User)\n    .createQueryBuilder()\n    .insert()\n    .into(User)\n    .values({\n      nome: \"admin\",\n      email: \"admin@admin\",\n      senha: senha,\n      matricula: \"1234\",\n      tipo: \"admin\",\n    })\n    .execute()\n    .then((e) => {\n      conn\n        .getRepository(User)\n        .findOne({ where: { email: \"admin@admin\", tipo: Not(IsNull()) } })\n        .then((e) => console.log(e));\n      res.status(201).json(e);\n    })\n    .catch((err) => res.status(500).json(err));\n});\n\n// app.listen(3000, () => {\n//   // console.log(\"Example app listening on port 3000!\");\n// });\n\nexport default app",{"ruleId":"73","severity":2,"message":"74","line":0,"column":1,"nodeType":null,"messageId":"75","endLine":0,"endColumn":1},{"ruleId":"76","severity":2,"message":"74","line":0,"column":1,"nodeType":null,"messageId":"75","endLine":0,"endColumn":1},{"ruleId":"77","severity":2,"message":"78","line":12,"column":22,"nodeType":"79","messageId":"80","endLine":12,"endColumn":23,"fix":"81"},{"ruleId":"82","severity":2,"message":"83","line":17,"column":31,"nodeType":"84","messageId":"85","endLine":17,"endColumn":43,"fix":"86"},{"ruleId":"77","severity":2,"message":"78","line":18,"column":34,"nodeType":"87","messageId":"80","endLine":18,"endColumn":35,"fix":"88"},{"ruleId":"77","severity":2,"message":"78","line":19,"column":26,"nodeType":"87","messageId":"80","endLine":19,"endColumn":27,"fix":"89"},{"ruleId":"77","severity":2,"message":"78","line":20,"column":38,"nodeType":"87","messageId":"80","endLine":20,"endColumn":39,"fix":"90"},{"ruleId":"91","severity":2,"message":"92","line":21,"column":54,"nodeType":"93","messageId":"94","endLine":21,"endColumn":56},{"ruleId":"82","severity":2,"message":"83","line":21,"column":57,"nodeType":"84","messageId":"85","endLine":21,"endColumn":59,"fix":"95"},{"ruleId":"82","severity":2,"message":"83","line":22,"column":17,"nodeType":"84","messageId":"85","endLine":22,"endColumn":28,"fix":"96"},{"ruleId":"77","severity":2,"message":"78","line":22,"column":29,"nodeType":"87","messageId":"80","endLine":22,"endColumn":30,"fix":"97"},{"ruleId":"77","severity":2,"message":"78","line":23,"column":56,"nodeType":"79","messageId":"80","endLine":23,"endColumn":57,"fix":"98"},{"ruleId":"77","severity":2,"message":"78","line":24,"column":22,"nodeType":"87","messageId":"80","endLine":24,"endColumn":23,"fix":"99"},{"ruleId":"91","severity":2,"message":"92","line":26,"column":18,"nodeType":"93","messageId":"94","endLine":26,"endColumn":20},{"ruleId":"82","severity":2,"message":"83","line":26,"column":21,"nodeType":"84","messageId":"85","endLine":26,"endColumn":30,"fix":"100"},{"ruleId":"101","severity":2,"message":"102","line":27,"column":5,"nodeType":"87","messageId":"103","endLine":27,"endColumn":29,"suggestions":"104"},{"ruleId":"77","severity":2,"message":"78","line":27,"column":28,"nodeType":"87","messageId":"80","endLine":27,"endColumn":29,"fix":"105"},{"ruleId":"77","severity":2,"message":"78","line":29,"column":19,"nodeType":"87","messageId":"80","endLine":29,"endColumn":20,"fix":"106"},{"ruleId":"77","severity":2,"message":"78","line":30,"column":9,"nodeType":"87","messageId":"80","endLine":30,"endColumn":10,"fix":"107"},{"ruleId":"77","severity":2,"message":"78","line":31,"column":3,"nodeType":"87","messageId":"80","endLine":31,"endColumn":4,"fix":"108"},{"ruleId":"109","severity":2,"message":"110","line":33,"column":1,"nodeType":"111","messageId":"112","endLine":34,"endColumn":1,"fix":"113"},{"ruleId":"77","severity":2,"message":"78","line":34,"column":24,"nodeType":"87","messageId":"80","endLine":34,"endColumn":25,"fix":"114"},{"ruleId":"77","severity":2,"message":"78","line":35,"column":48,"nodeType":"87","messageId":"80","endLine":35,"endColumn":49,"fix":"115"},{"ruleId":"77","severity":2,"message":"78","line":36,"column":16,"nodeType":"87","messageId":"80","endLine":36,"endColumn":17,"fix":"116"},{"ruleId":"82","severity":2,"message":"83","line":38,"column":13,"nodeType":"84","messageId":"85","endLine":38,"endColumn":35,"fix":"117"},{"ruleId":"77","severity":2,"message":"78","line":38,"column":36,"nodeType":"87","messageId":"80","endLine":38,"endColumn":37,"fix":"118"},{"ruleId":"101","severity":2,"message":"102","line":39,"column":1,"nodeType":"87","messageId":"103","endLine":48,"endColumn":4,"suggestions":"119"},{"ruleId":"82","severity":2,"message":"83","line":40,"column":15,"nodeType":"84","messageId":"85","endLine":40,"endColumn":57,"fix":"120"},{"ruleId":"77","severity":2,"message":"78","line":40,"column":58,"nodeType":"87","messageId":"80","endLine":40,"endColumn":59,"fix":"121"},{"ruleId":"82","severity":2,"message":"83","line":44,"column":19,"nodeType":"84","messageId":"85","endLine":44,"endColumn":46,"fix":"122"},{"ruleId":"77","severity":2,"message":"78","line":44,"column":47,"nodeType":"87","messageId":"80","endLine":44,"endColumn":48,"fix":"123"},{"ruleId":"124","severity":2,"message":"125","line":47,"column":21,"nodeType":"126","messageId":"127","endLine":47,"endColumn":49,"fix":"128"},{"ruleId":"82","severity":2,"message":"83","line":47,"column":33,"nodeType":"84","messageId":"85","endLine":47,"endColumn":42,"fix":"129"},{"ruleId":"77","severity":2,"message":"78","line":47,"column":50,"nodeType":"87","messageId":"80","endLine":47,"endColumn":51,"fix":"130"},{"ruleId":"77","severity":2,"message":"78","line":48,"column":3,"nodeType":"87","messageId":"80","endLine":48,"endColumn":4,"fix":"131"},{"ruleId":"132","severity":2,"message":"133","line":50,"column":1,"nodeType":"134","messageId":"135","endLine":50,"endColumn":9,"fix":"136"},{"ruleId":"82","severity":2,"message":"83","line":51,"column":9,"nodeType":"84","messageId":"85","endLine":51,"endColumn":16,"fix":"137"},{"ruleId":"77","severity":2,"message":"78","line":51,"column":29,"nodeType":"87","messageId":"80","endLine":51,"endColumn":30,"fix":"138"},{"ruleId":"82","severity":2,"message":"83","line":52,"column":9,"nodeType":"84","messageId":"85","endLine":52,"endColumn":20,"fix":"139"},{"ruleId":"77","severity":2,"message":"78","line":52,"column":37,"nodeType":"87","messageId":"80","endLine":52,"endColumn":38,"fix":"140"},{"ruleId":"82","severity":2,"message":"83","line":54,"column":9,"nodeType":"84","messageId":"85","endLine":54,"endColumn":12,"fix":"141"},{"ruleId":"142","severity":2,"message":"143","line":54,"column":14,"nodeType":"144","messageId":"145","endLine":85,"endColumn":2},{"ruleId":"82","severity":2,"message":"83","line":55,"column":28,"nodeType":"84","messageId":"85","endLine":55,"endColumn":34,"fix":"146"},{"ruleId":"77","severity":2,"message":"78","line":55,"column":38,"nodeType":"79","messageId":"80","endLine":55,"endColumn":39,"fix":"147"},{"ruleId":"82","severity":2,"message":"83","line":57,"column":11,"nodeType":"84","messageId":"85","endLine":57,"endColumn":18,"fix":"148"},{"ruleId":"82","severity":2,"message":"83","line":58,"column":12,"nodeType":"84","messageId":"85","endLine":58,"endColumn":25,"fix":"149"},{"ruleId":"150","severity":1,"message":"151","line":59,"column":5,"nodeType":"152","messageId":"153","endLine":59,"endColumn":17,"fix":"154"},{"ruleId":"82","severity":2,"message":"83","line":60,"column":16,"nodeType":"84","messageId":"85","endLine":60,"endColumn":22,"fix":"155"},{"ruleId":"82","severity":2,"message":"83","line":61,"column":11,"nodeType":"84","messageId":"85","endLine":61,"endColumn":18,"fix":"156"},{"ruleId":"157","severity":2,"message":"158","line":61,"column":18,"nodeType":"152","messageId":"94","endLine":61,"endColumn":19,"fix":"159"},{"ruleId":"77","severity":2,"message":"78","line":62,"column":5,"nodeType":"87","messageId":"80","endLine":62,"endColumn":6,"fix":"160"},{"ruleId":"82","severity":2,"message":"83","line":70,"column":13,"nodeType":"84","messageId":"85","endLine":70,"endColumn":20,"fix":"161"},{"ruleId":"82","severity":2,"message":"83","line":71,"column":14,"nodeType":"84","messageId":"85","endLine":71,"endColumn":27,"fix":"162"},{"ruleId":"150","severity":1,"message":"151","line":72,"column":7,"nodeType":"152","messageId":"153","endLine":72,"endColumn":19,"fix":"163"},{"ruleId":"82","severity":2,"message":"83","line":73,"column":18,"nodeType":"84","messageId":"85","endLine":73,"endColumn":24,"fix":"164"},{"ruleId":"82","severity":2,"message":"83","line":74,"column":13,"nodeType":"84","messageId":"85","endLine":74,"endColumn":20,"fix":"165"},{"ruleId":"157","severity":2,"message":"158","line":74,"column":20,"nodeType":"152","messageId":"94","endLine":74,"endColumn":21,"fix":"166"},{"ruleId":"101","severity":2,"message":"102","line":78,"column":7,"nodeType":"87","messageId":"103","endLine":81,"endColumn":38,"suggestions":"167"},{"ruleId":"82","severity":2,"message":"83","line":80,"column":36,"nodeType":"84","messageId":"85","endLine":80,"endColumn":49,"fix":"168"},{"ruleId":"124","severity":2,"message":"125","line":81,"column":22,"nodeType":"126","messageId":"127","endLine":81,"endColumn":36,"fix":"169"},{"ruleId":"77","severity":2,"message":"78","line":81,"column":37,"nodeType":"87","messageId":"80","endLine":81,"endColumn":38,"fix":"170"},{"ruleId":"77","severity":2,"message":"78","line":82,"column":30,"nodeType":"87","messageId":"80","endLine":82,"endColumn":31,"fix":"171"},{"ruleId":"77","severity":2,"message":"78","line":84,"column":47,"nodeType":"87","messageId":"80","endLine":84,"endColumn":48,"fix":"172"},{"ruleId":"77","severity":2,"message":"78","line":85,"column":3,"nodeType":"87","messageId":"80","endLine":85,"endColumn":4,"fix":"173"},{"ruleId":"174","severity":2,"message":"175","line":91,"column":19,"nodeType":"111","messageId":"176","fix":"177"},"@typescript-eslint/prefer-nullish-coalescing","This rule requires the `strictNullChecks` compiler option to be turned on to function correctly.","noStrictNullCheck","@typescript-eslint/strict-boolean-expressions","@typescript-eslint/semi","Extra semicolon.","VariableDeclaration","extraSemi",{"range":"178","text":"179"},"@typescript-eslint/quotes","Strings must use singlequote.","Literal","wrongQuotes",{"range":"180","text":"181"},"ExpressionStatement",{"range":"182","text":"183"},{"range":"184","text":"185"},{"range":"186","text":"187"},"eqeqeq","Expected '!==' and instead saw '!='.","BinaryExpression","unexpected",{"range":"188","text":"189"},{"range":"190","text":"191"},{"range":"192","text":"193"},{"range":"194","text":"195"},{"range":"196","text":"197"},{"range":"198","text":"199"},"@typescript-eslint/no-floating-promises","Promises must be awaited, end with a call to .catch, end with a call to .then with a rejection handler or be explicitly marked as ignored with the `void` operator.","floatingVoid",["200"],{"range":"201","text":"202"},{"range":"203","text":"204"},{"range":"205","text":"206"},{"range":"207","text":"208"},"no-multiple-empty-lines","More than 1 blank line not allowed.","Program","consecutiveBlank",{"range":"209","text":"210"},{"range":"211","text":"179"},{"range":"212","text":"179"},{"range":"213","text":"214"},{"range":"215","text":"216"},{"range":"217","text":"218"},["219"],{"range":"220","text":"221"},{"range":"222","text":"223"},{"range":"224","text":"225"},{"range":"226","text":"227"},"@typescript-eslint/no-confusing-void-expression","Returning a void expression from an arrow function shorthand is forbidden. Please add braces to the arrow function.","CallExpression","invalidVoidExprArrow",{"range":"228","text":"229"},{"range":"230","text":"231"},{"range":"232","text":"206"},{"range":"233","text":"234"},"spaced-comment","Expected space or tab after '//' in comment.","Line","expectedSpaceAfter",{"range":"235","text":"236"},{"range":"237","text":"238"},{"range":"239","text":"179"},{"range":"240","text":"241"},{"range":"242","text":"243"},{"range":"244","text":"245"},"@typescript-eslint/no-misused-promises","Promise returned in function argument where a void return was expected.","ArrowFunctionExpression","voidReturnArgument",{"range":"246","text":"247"},{"range":"248","text":"249"},{"range":"250","text":"251"},{"range":"252","text":"253"},"object-shorthand","Expected property shorthand.","Property","expectedPropertyShorthand",{"range":"254","text":"255"},{"range":"256","text":"257"},{"range":"258","text":"251"},"@typescript-eslint/comma-dangle","Unexpected trailing comma.",{"range":"259","text":"260"},{"range":"261","text":"262"},{"range":"263","text":"264"},{"range":"265","text":"266"},{"range":"267","text":"255"},{"range":"268","text":"247"},{"range":"269","text":"264"},{"range":"270","text":"271"},["272"],{"range":"273","text":"266"},{"range":"274","text":"275"},{"range":"276","text":"277"},{"range":"278","text":"279"},{"range":"280","text":"206"},{"range":"281","text":"282"},"eol-last","Newline required at end of file but not found.","missing",{"range":"283","text":"284"},[429,435],")\napp",[584,596],"'user-agent'",[625,638],"origin\n  log",[652,665],"method\n  log",[696,703],")\n  if",[755,757],"''",[777,788],"'tem token'",[788,800],")\n    const",[845,855],")\n    log",[863,874],"userId\n  }",[895,904],"'OPTIONS'",{"messageId":"285","fix":"286","desc":"287"},[934,940],")\n  }",[958,967],")\n  next",[968,972],")\n}",[972,980],")\n\n\napp",[975,976],"",[999,1005],[1048,1054],[1065,1076],")\n\nconsole",[1081,1103],"'iniciando o database'",[1103,1110],")\nconn",{"messageId":"285","fix":"288","desc":"287"},[1151,1193],"'Database connected...------\\n\\n\\n\\n\\n\\n '",[1193,1202],")\n  conn",[1258,1285],"'Database synchronized... '",[1285,1297],")\n      app",[1338,1366],"{ console.log(\"Error: \" + err); }",[1350,1359],"'Error: '",[1366,1370],[1370,1386],")\n\n//Routes\napp",[1376,1376]," ",[1391,1398],"'/user'",[1410,1416],[1421,1432],"'/template'",[1448,1455],")\n\napp",[1460,1463],"'/'",[1514,1520],"'1234'",[1523,1533],")\n  await",[1576,1583],"'basic'",[1596,1609],"'basic@basic'",[1615,1627],"senha",[1644,1650],"'4321'",[1662,1669],[1662,1674],"\"basic\"\n  }",[1674,1684],")\n\n  conn",[1792,1799],"'admin'",[1814,1827],"'admin@admin'",[1835,1847],[1866,1872],[1886,1893],[1886,1900],"\"admin\"\n    }",{"messageId":"285","fix":"289","desc":"287"},[2011,2024],[2072,2086],"{ console.log(e); }",[2086,2098],")\n      res",[2117,2125],")\n    }",[2172,2176],[2176,2282],")\n\n// app.listen(3000, () => {\n//   // console.log(\"Example app listening on port 3000!\");\n// });\n\nexport",[2294,2294],"\n","floatingFixVoid",{"range":"290","text":"291"},"Add void operator to ignore.",{"range":"292","text":"291"},{"range":"293","text":"291"},[912,912],"void ",[1106,1106],[1942,1942]]